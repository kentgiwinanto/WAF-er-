{% extends "layout.html" %}
{% block body %}
	<!-- Cards For Statistic -->
	<div id="MainLayout">

		<div class="row" style="grid-auto-flow: row dense;">
            <div class="col s6 m4">
                <div class="card">
                    <div class="card-content white-text">
                        <canvas id="myChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="col s6 m4">
                <div class="card">
                    <div class="card-content white-text">
                        <canvas id="myChart2"></canvas>
                    </div>
                </div>
            </div>
            <div class="col s6 m4">
                <div class="card">
                    <div class="card-content white-text">
                        <canvas id="myChart3"></canvas>                    
                    </div>    
                </div>
            </div>
             <div class="col s6 m4">
                <div class="card">
                    <div class="card-content white-text">
                        <canvas id="myChart4"></canvas>                    
                    </div>    
                </div>
            </div>
             <div class="col s6 m4">
                <div class="card">
                    <div class="card-content white-text">
                        <canvas id="myChart5"></canvas>                    
                    </div>    
                </div>
            </div>
             <div class="col s6 m4">
                <div class="card">
                    <div class="card-content white-text">
                        <canvas id="myChart6"></canvas>                    
                    </div>    
                </div>
            </div>
        </div>
		<div class="row">
			<div class="col s12">
				<ul class="tabs tabs-fixed-width tab-demo z-depth-1" style="margin-bottom: 5px">
					<li class="tab"><a class="active" href="#SecurityLogs" >Security Log</a></li>
					<li class="tab"><a  href="#AccessLogs" >Access Log</a></li>
				</ul>
				<div class="tab_content" style="background-color: white;border-radius: 1px;padding-left: 13px;padding-top: 10px; border-bottom: solid 1px;height: 500px;overflow-y: scroll;overflow-x: scroll;">
					<div id="SecurityLogs" class="col s12">
						<div class="row">
							<table id="SecurityLogTable" class="display">
								<thead>
									<tr>
										<th>ID</th>
										<th>Date/Time</th>
										<th>EventName</th>
										<th>IP Source</th>
										<th>Destination</th>
										<th> </th>
									</tr>
								</thead>
								<tbody>
									{% for data in SecurityLog %}
										<tr>
											<td> {{ data['transaction']['id'] }} </td>
											<td> {{ data['transaction']['time_stamp'] }} </td>
											<td> {{ data['transaction']['messages'][0]['message'] }} </td>
											<td> {{ data['transaction']['request']['headers']['Host'] }} </td>
											<td> {{ data['transaction']['host_ip'] }}:{{ data['transaction']['host_port'] }} </td>
											<td><a class="tooltip" href="#ModalDetailPage">
	                                        <i class="material-icons">receipt</i>
	                                        <span class="tooltiptext">Detail</span>
	                                    </a></td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
					<div id="AccessLogs" class="col s12">
						<div class="row">
							<div class="col s12">
								<table id="AccessLogsTable" class="display">
									<thead>
										<tr>
											<th>TimeStamp</th>
											<th>From</th>
											<th>To</th>
											<th>Request</th>
											<th>Request Body</th>
											<th>Status</th>
											<th>Body Bytes Sent</th>
											<th>User Agent</th>
										</tr>
									</thead>
									<tbody>
										{% for data in AccessLogs%}
										<tr>
											<td>{{ data['time_local'] }}</td>
											<td>{{ data['server_addr'] }}</td>
											<td>{{ data['remote_addr'] }}</td>
											<td>{{ data['request'] }}</td>
											<td>{{ data['request_body'] }}</td>
											<td>{{ data['status'] }}</td>
											<td>{{ data['body_bytes_sent'] }}</td>
											<td>{{ data['http_user_agent'] }}</td>
										</tr>
										{% endfor %}
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}

<!-- Tambahan JS masukkin ke parent -->
{% block js %}
	<script src="{{ url_for('static', filename='js/MainPageChart.js') }}"></script>
	<script>
		$(document).ready( function () {
			$('#SecurityLogTable').DataTable({
				"bAutoWidth": false
				});
			});
			$('#AccessLogsTable').DataTable({
				"bAutoWidth": false
				});
			$('.tabs').tabs();
			$('.ModalDetailPage').modal();

	</script>
	{% endblock %}